# Модуль 3. Задание 15 (TCP сокеты, 2 балла)
    Отладить программы ТСP-клиента и сервера из лекции.
    Добавить возможность вычисления разности, произведения, частного двух чисел. Необходимое математическое действие указывает клиент.

# Реализация
    Программа состоит из двух частей: сервера и клиента.
## `tcp_server.c`
- Главная функция `main` реализует сервер на основе сокетов, который принимает подключения по TCP и обрабатывает каждое подключение в отдельном процессе.
- Сервер ожидает, что номер порта будет передан в качестве аргумента командной строки. Если порт не указан, выводится сообщение об ошибке и программа завершается.
- В программе создается сокет с использованием функции `socket()` с парметрами `AF_INET` (протокол IPv4) и `SOCK_STREAM`(TCP). Если создание сокета завершилось неудачей, программа вызывает функцию `error()`.
- Сервер связывает сокет с локальным адресом, описанным в `serv_addr`:
- Сервер начинает слушать входящие подключения с помощью `listen()`, устанавливая размер очереди на 5.
- Далее сервер создает объект общей памяти с помощью `shm_open()` и `ftruncate()`. Общая память используется для хранения количества активных клиентов. Затем память отображается в адресное пространство процесса с помощью `mmap()`, и в неё записывается начальное количество клиентов.
- Затем сервер входит в бесконечный цикл, в котором: ожидается новое подключение через `accept()`, после успешного подключения количество клиентов увеличивается. Извлекаются сведения о клиенте, включая его имя хоста и IP-адрес. Если клиент успешно подключается, создается новый процесс с помощью `fork()`. В дочернем процессе закрывается основной сокет и вызывается функция `dostuff(newsockfd, shm)` для обработки запроса клиента. Родительский процесс закрывает дескриптор нового сокета и продолжает слушать входящие подключения.
- При завершении работы сервера закрывается основной сокет и вызывается `exit(EXIT_SUCCESS)`.
- В коде сервера также есть функция `dostuff(newsockfd, shm)`. Она предназначена для обработки логики, связанной с клиентом.

## `tcp_client.c`
- Клиент ожидает, что имя хоста и номер порта будут переданы в качестве аргументов командной строки. Если не указаны аргументы, выводится сообщение об использовании программы, и программа завершается.
- Номер порта конвертируется из строки в целое число с помощью `atoi()`. Если порт некорректный (меньше или равен нулю), выводится сообщение об ошибке, и программа завершает работу.
- Клиент создает сокет с помощью функции `socket()`, задавая протокол IPv4 (`AF_INET`) и TCP (`SOCK_STREAM`). Если создание сокета завершилось неудачей, вызывается функция `error()`.
- Клиент пытается получить информацию о сервере по его имени с помощью функции `gethostbyname()`. Если сервер не найден, выводится сообщение об ошибке, и программа завершает работу.
- Затем обнуляется структура `serv_addr` с помощью `bzero()`. Задается тип адреса (IPv4) и заполняется адрес сервера, используя `bcopy()` для копирования адреса из структуры, полученной от `gethostbyname()`. Устанавливается порт с помощью функции `htons()`.
- Далее клиент устанавливает соединение с сервером с помощью `connect()`. Если соединение не может быть установлено, вызывается функция `error()`.
- В цикле - клиент ждет ввода от пользователя. Ввод осуществляется с помощью `fgets()`, и считываемая строка помещается в буфер `buff`. Строка передается на сервер с помощью `send()`. Если пользователь вводит "quit", программа корректно закрывает сокет и завершает свою работу. Клиент ожидает ответ от сервера с помощью `recv()`, который помещает данные в тот же буфер `buff`. Если сервер закрыл соединение (возвращает 0), цикл завершается. Ответ от сервера выводится на экран.
- После выхода из цикла соединение с сервером закрывается с помощью `close()`, и программа завершает выполнение с кодом `EXIT_SUCCESS`.

